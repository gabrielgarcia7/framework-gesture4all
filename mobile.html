<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pt-br" lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="css/main.css">
  <style>
    video {
      width: 100%;
      height: auto;
    }
  </style>  
  <script src="js/tiltandtap.js"></script>
  <script src="js/jquery-2.1.1.min.js"></script>
  <script src="js/gesture4all.js"></script>

  <script>
    window.focus();   
    var mytat = new tiltandtap({
      tiltLeft :  {callback: gesto('inclinarEsquerda')}, //volume-
      tiltRight : {callback: gesto('inclinarDireita')}, //volume+
      tiltUp :    {callback: gesto('inclinarTras')}, //play
      tiltDown:   {callback: gesto('inclinarFrente')}, //pause
      tiltClockwise: {callback: gesto('rotacaoDireita')}, //time+
      tiltConterclockwise : {callback: gesto('rotacaoEsquerda')} //time-
    });

    var gestos = [
      "inclinarTras",
      "inclinarFrente",
      "inclinarDireita",
      "inclinarEsquerda",
      "rotacaoDireita",
      "rotacaoEsquerda"
    ];

    function gesto(){

      switch(arguments[0]){

        case 'inclinarTras':
          realizarAcao(gestos[0]);
          break;

        case 'inclinarFrente':
          realizarAcao(gestos[1]);
          break;

        case 'inclinarDireita':
          realizarAcao(gestos[2]);
          break;

        case 'inclinarEsquerda':
          realizarAcao(gestos[3]);
          break;

        case 'rotacaoDireita':
          realizarAcao(gestos[4]);
          break;

        case 'rotacaoEsquerda':
          realizarAcao(gestos[5]);
          break;
      }  
    }

    function configuracao(){

      var aux = 0;
      var mensagemConfig = ["inclinar para trás", "inclinar para frente", "inclinar para a esquerda",
                          "inclinar para a direita", "rotacionar para a esquerda", "rotacionar para a direita"];


      alert("Vamos configurar os botões de acordo com os gestos disponíveis!");
      alert("Selecione o botão referente ao gesto de " + mensagemConfig[aux]);

      $("button").on('click',function() { 
        var t = (this.id); 
        $('#GFG_DOWN').text("ID = " + t);
        gesto[aux] = t;
        aux++;
        if(aux < 6){
          alert("Gesto configurado com sucesso. Pressione OK (ou ENTER) para prosseguir.")
          alert("Selecione o botão referente ao gesto de " + mensagemConfig[aux]);
        }
        
      });

      // Salvar configuração nos cookies;
      // Criar função que recupera informações do cookir;

      //alert("Gestos configurados com sucesso!");

    }

    function realizarAcao(botao){
      document.getElementById(botao).click();
    }

    function play(){
       //Play function
        if(player.pause){
          player.play();
        }
       //feedback
        audioPlay(); //audivel
        blinkPlay(); //visual
        window.navigator.vibrate(50); //tátil
        document.getElementById("result").innerHTML = "cima"; //visual
        console.log("cima"); //log   
      }


      function pause(){
       //Pause function
        if(player.play){
           player.pause();
        }
       //feedback
        audioPause(); //audivel
        blinkPause(); //visual
        window.navigator.vibrate(50); //tátil
        document.getElementById("result").innerHTML = "baixo"; //visual
        console.log("baixo"); //log
      }


      function volumeMais(){
       //Audio function
        setVolume(.1) //up by 10%
       //feedback
        audioMaisVolume(); //audivel
        blinkMaisVolume(); //visual
        window.navigator.vibrate(50); //tátil
        document.getElementById("result").innerHTML = "direita"; //visual
        console.log("direita"); //log     
      }


      function volumeMenos(){
       //Audio function
        setVolume(-.1); //down by 10%
       //feedback
        audioMenosVolume(); //audivel
        blinkMenosVolume(); //visual
        window.navigator.vibrate(50); //tátil
        document.getElementById("result").innerHTML = "esquerda"; //visual
        console.log("esquerda"); //log     
      }


      function avancar(){
       //Time function
        setTime(10);
       //feedback
        audioAvancar(); //audivel
        blinkAvancar(); //visual
        window.navigator.vibrate(50); //tátil
        document.getElementById("result").innerHTML = "horário"; //visual
        console.log("horário"); //log
      }


      function retroceder(){
       //Time function
        setTime(-10);
       //feedback
        audioRetroceder(); //audivel
        blinkRetroceder(); //visual
        window.navigator.vibrate(50); //tátil
        document.getElementById("result").innerHTML = "anti-horário"; //visual
        console.log("anti-horário"); //log        
      }

      function teste(){
        audioRetroceder();
        audioPlay();
        audioMenosVolume();
        audioAvancar();
        audioPause();
        audioMaisVolume();
      }
    </script>

    <title>Gesture4ALL</title>
  </head>

  <body>
    <script>
      $(document).ready(function(){
        configuracao();
      });
    </script>

    <header id="header">
     <div>
      <a href="" class="logo">
        <span class="symbol"><img src="images/gesture.svg" alt="" /></span><span class="title">gesture4All</span><br>
      </a>
    </div>
  </header>
  <b>Opção 1: Testando com Smartphone</b><br>
  <a href="index.html">Voltar a tela anterior</a><br>
  <video autoplay width="400" id="player" controls preload="auto">
    <source src="assets/olhardigital.webm" type='video/webm; codecs="vp8, vorbis"' />
    <source src="assets/olhardigital.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
    Seu navegador não suporta vídeo em HTML 5.
  </video><br>
  <p>v03</p>
  Último gesto reconhecido: <b><span id="result"></span></b><br>
  Instruções:
  <ul>
    <li><button id="play" type="button" onclick="play()">Play</button></li> 
    <li><button id="pause" type="button" onclick="pause()">Pause</button></li> 
    <li><button id="volumeMais" type="button" onclick="volumeMais()">Mais Volume</button></li> 
    <li><button id="volumeMenos" type="button" onclick="volumeMenos()">Menos Volume</button></li> 
    <li><button id="avancar" type="button" onclick="avancar()">Avançar</button></li> 
    <li><button id="retroceder" type="button" onclick="retroceder()">Retroceder</button></li>
  </ul>

  <p id = "GFG_DOWN" style =  
          "color:green; font-size: 20px; font-weight: bold;"> 
  </p>
</body>
</html>
